<div class="page-header"> 
    <button ng-click="get()" class="pull-right">
        <span class="glyphicon glyphicon-refresh"></span>
    </button>
    <button ng-click="stop()" class="pull-right">
        <span class="glyphicon glyphicon-off"></span>
    </button>
    
    <h1>Workers</h1>
</div>

<div class="config">
    <h2>Config</h2>
    <div ng-if="configAlert" class="alert alert-warning">
        {{configAlert}}
    </div>

    <form ng-submit="postConfig()">
        <textarea ng-model="config" ng-disabled="busy"></textarea>
        <button type="submit">Run</button>
    </form>
</div>

<div>
    <h2>Worker Status</h2>
    <table class="table workers">
        <thead>
            <tr>
                <th>Type</td>
                <th>ID</th>
                <th>Docker</th>
                <th>Config</th>
                <th>Rate</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="worker in workers">
                <td>{{worker.type}}</td>
                <td>{{worker.id}}</td>
                <td>
                    <a href="#/docker/{{worker.docker}}">{{worker.docker_status}}</a>
                </td>
                <td>TTL={{worker.config_ttl}}</td>
                <td>{{worker.rate}}</td>
                <td>
                    <a href="#/workers/{{worker.type}}/{{worker.id}}"><span class="glyphicon glyphicon-zoom-in"></span></a>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<div>
    <h2>Stats</h2>

    <ng-include src="'/close/stats-chart.html'"></ng-include>
</div>
